function start(){var t,i,o,e,s,n,h,a,d,r,l,g,p,y,E=0,M=[],w=new THREE.Vector3(0,1,0),c=new THREE.Vector3,m=0;function T(i){i.mesh.position.x=0,i.mesh.position.y=0,i.mesh.position.z=0,i.mesh.rotation.x=Math.random()*Math.PI*2,i.mesh.rotation.y=Math.random()*Math.PI*2,i.mesh.rotation.z=Math.random()*Math.PI*2,i.mesh.scale.set(.1,.1,.1),i.mesh.material.opacity=0,i.material.needUpdate=!0,t.add(i.mesh),M.push(i)}function b(){this.geometry=new THREE.IcosahedronGeometry(75,1),this.material=new THREE.MeshLambertMaterial({color:"white",shading:THREE.FlatShading,transparent:!0}),this.mesh=new THREE.Mesh(this.geometry,this.material),T(this)}function R(t,i,o,e,s,n){var h=new THREE.CylinderGeometry(t,i,o,e,s);return new THREE.Mesh(h,n)}Rocket=function(){this.rocket=new THREE.Object3D,this.rocketTween=TweenMax.set(this.rocket.position,{x:0}),this.bodyMat=new THREE.MeshLambertMaterial({color:1934186,wireframe:!1,shading:THREE.FlatShading}),this.ringMat=new THREE.MeshLambertMaterial({color:3808025,wireframe:!1,shading:THREE.FlatShading}),this.metalMat=new THREE.MeshLambertMaterial({color:8488845,wireframe:!1,shading:THREE.FlatShading});var t=new THREE.BoxGeometry(30,10,30);this.top=new THREE.Object3D,this.mid=new THREE.Object3D,this.bot=new THREE.Object3D,this.engine=new THREE.Object3D,this.legs=new THREE.Object3D,this.bodyTopRing=R(35,35,10,10,1,this.ringMat),this.bodyTopRing.position.y=0,this.bodyTopBase=R(25,30,10,10,1,this.bodyMat),this.bodyTopBase.position.y=10,this.bodyTop=R(5,25,30,10,1,this.bodyMat),this.bodyTop.position.y=30,this.bodyTopNippleBase=R(5,5,5,10,1,this.ringMat),this.bodyTopNippleBase.position.y=47,this.bodyTopNipple=R(2,5,5,10,1,this.ringMat),this.bodyTopNipple.position.y=52,this.bodyTopAntenna=R(1,1,25,5,1,this.ringMat),this.bodyTopAntenna.position.y=63,this.bodyTopAntennaBall=new THREE.Mesh(new THREE.SphereGeometry(2,20,10),this.ringMat),this.bodyTopAntennaBall.position.y=76,this.top.add(this.bodyTopRing),this.top.add(this.bodyTopBase),this.top.add(this.bodyTop),this.top.add(this.bodyTopNippleBase),this.top.add(this.bodyTopNipple),this.top.add(this.bodyTopAntenna),this.top.add(this.bodyTopAntennaBall),this.bodyMidRing=R(87,87,12,12,1,this.ringMat),this.bodyMidRing.position.y=0,this.bodyMidBase=R(60,80,50,12,1,this.bodyMat),this.bodyMidBase.position.y=31,this.bodyMid=R(30,60,120,12,1,this.bodyMat),this.bodyMid.position.y=116,this.mid.add(this.bodyMid),this.mid.add(this.bodyMidBase),this.mid.add(this.bodyMidRing),this.bodyBotRing=R(45,45,5,12,1,this.ringMat),this.bodyBotRing.position.y=0,this.bodyBot=R(80,45,25,12,1,this.bodyMat),this.bodyBot.position.y=15,this.bot.add(this.bodyBotRing),this.bot.add(this.bodyBot),this.bodyEngineTop=R(45,50,5,12,1,this.bodyMat),this.bodyEngineTop.position.y=0,this.bodyEngineRingTop=R(55,50,10,12,1,this.ringMat),this.bodyEngineRingTop.position.y=-8,this.bodyEngineMid=R(45,45,10,8,1,this.bodyMat),this.bodyEngineMid.position.y=-18,this.bodyEngineRingBot=R(50,40,10,12,1,this.ringMat),this.bodyEngineRingBot.position.y=-28,this.bodyEngineNozzle=R(45,55,25,12,1,this.metalMat),this.bodyEngineNozzle.position.y=-44,this.bodyEngineNozzleEnd=R(60,60,5,12,1,this.metalMat),this.bodyEngineNozzleEnd.position.y=-59,this.engine.add(this.bodyEngineTop),this.engine.add(this.bodyEngineRingTop),this.engine.add(this.bodyEngineMid),this.engine.add(this.bodyEngineRingBot),this.engine.add(this.bodyEngineNozzle),this.engine.add(this.bodyEngineNozzleEnd),this.legA=R(5,5,170,6,1,this.ringMat),this.legA.position.set(0,0,-75),this.legA.rotation.x=20*Math.PI/180,this.legB=R(5,5,170,6,1,this.ringMat),this.legB.position.set(75,0,0),this.legB.rotation.z=20*Math.PI/180,this.legY=R(5,5,170,6,1,this.ringMat),this.legY.position.set(0,0,75),this.legY.rotation.x=-20*Math.PI/180,this.legZ=R(5,5,170,6,1,this.ringMat),this.legZ.position.set(-75,0,0),this.legZ.rotation.z=-20*Math.PI/180,this.legs.add(this.legA),this.legs.add(this.legB),this.legs.add(this.legZ),this.legs.add(this.legY),this.legASock=R(6,6,50,6,1,this.metalMat),this.legASock.position.set(0,-37,-89),this.legASock.rotation.x=20*Math.PI/180,this.legBSock=R(6,6,50,6,1,this.metalMat),this.legBSock.position.set(89,-37,0),this.legBSock.rotation.z=20*Math.PI/180,this.legYSock=R(6,6,50,6,1,this.metalMat),this.legYSock.position.set(0,-37,89),this.legYSock.rotation.x=-20*Math.PI/180,this.legZSock=R(6,6,50,6,1,this.metalMat),this.legZSock.position.set(-89,-37,0),this.legZSock.rotation.z=-20*Math.PI/180,this.legs.add(this.legASock),this.legs.add(this.legBSock),this.legs.add(this.legYSock),this.legs.add(this.legZSock),this.legAFoot=new THREE.Mesh(t,this.metalMat),this.legAFoot.position.set(0,-45,0),this.legAFoot.rotation.x=-20*Math.PI/180,this.legBFoot=new THREE.Mesh(t,this.metalMat),this.legBFoot.position.set(0,-45,0),this.legBFoot.rotation.z=-20*Math.PI/180,this.legYFoot=new THREE.Mesh(t,this.metalMat),this.legYFoot.position.set(0,-45,0),this.legYFoot.rotation.x=20*Math.PI/180,this.legZFoot=new THREE.Mesh(t,this.metalMat),this.legZFoot.position.set(0,-45,0),this.legZFoot.rotation.z=20*Math.PI/180,this.legASock.add(this.legAFoot),this.legBSock.add(this.legBFoot),this.legYSock.add(this.legYFoot),this.legZSock.add(this.legZFoot),this.windowXTop=R(14,14,2,10,1,this.ringMat),this.windowXTop.position.set(0,-45,57),this.windowXTop.rotation.x=75*Math.PI/180,this.windowXInnerTop=R(9,9,2,10,1,this.metalMat),this.windowXInnerTop.position.set(0,2,0),this.windowXBot=R(12,12,2,10,1,this.ringMat),this.windowXBot.position.set(0,0,46),this.windowXBot.rotation.x=75*Math.PI/180,this.windowXInnerBot=R(7,7,2,10,1,this.metalMat),this.windowXInnerBot.position.set(0,2,0),this.windowXTop.add(this.windowXInnerTop),this.windowXBot.add(this.windowXInnerBot),this.bodyMid.add(this.windowXTop),this.bodyMid.add(this.windowXBot),this.top.position.y=170,this.mid.position.y=0,this.bot.position.y=-33,this.engine.position.y=-38,this.legs.position.y=-40,this.rocket.add(this.top),this.rocket.add(this.mid),this.rocket.add(this.bot),this.rocket.add(this.engine),this.rocket.add(this.legs)},Rocket.prototype.flyPath=function(){a=spline.getPoint(m),l=spline.getTangent(m).normalize(),c.crossVectors(w,l).normalize(),d=Math.acos(w.dot(l));var t=this.rocket.quaternion.setFromAxisAngle(c,d);this.rocketTween.kill(),this.tweenPosition=TweenMax.to(r.rocket.position,.1,{x:a.x,y:a.y,z:a.z}),this.tweenQuaternion=TweenMax.to(this.rocket.quaternion,.1,{x:t._x,y:t._y,z:t._z}),m=m>=1?0:m+=9e-4},THREE.Curves={},THREE.Curves.CinquefoilKnot=THREE.Curve.create((function(t){this.scale=void 0===t?10:t}),(function(t){t*=2*Math.PI;var i=(2+Math.cos(5*t))*Math.cos(2*t),o=(2+Math.cos(5*t))*Math.sin(2*t),e=Math.sin(5*t);return new THREE.Vector3(i,o,e).multiplyScalar(this.scale)})),t=new THREE.Scene,g=window.innerHeight,p=window.innerWidth,(i=new THREE.PerspectiveCamera(60,p/g,1,2e4)).position.z=2500,i.position.y=1100,i.position.x=1300,(h=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(p,g),h.setClearColor(0,0),document.getElementById("galaxy").appendChild(h.domElement),window.addEventListener("resize",(function(){g=window.innerHeight,p=window.innerWidth,h.setSize(p,g),i.aspect=p/g,i.updateProjectionMatrix()}),!1),o=new THREE.OrbitControls(i,h.domElement),n=new THREE.HemisphereLight(16777215,16777215,.5),(e=new THREE.DirectionalLight(16777215,.8)).position.set(200,200,200),e.castShadow=!0,e.shadowDarkness=.2,(s=new THREE.DirectionalLight(16777215,.4)).position.set(-100,200,50),s.shadowDarkness=.1,s.castShadow=!0,t.add(s),t.add(n),t.add(e),r=new Rocket,t.add(r.rocket),function(){spline=new THREE.Curves.CinquefoilKnot(700);for(var t=new THREE.LineBasicMaterial({color:0}),i=new THREE.Geometry,o=0;o<spline.getPoints(100).length;o++)i.vertices.push(spline.getPoints(100)[o]);line=new THREE.Line(i,t)}(),function(){const i=new THREE.ImageUtils.loadTexture("./textures/moon_safemoon.png"),o=new THREE.MeshLambertMaterial({map:i,wireframe:!1,shading:THREE.FlatShading,side:THREE.FrontSide});var e=new THREE.IcosahedronGeometry(530,5);moon=new THREE.Mesh(e,o),t.add(moon)}(),function e(){requestAnimationFrame(e),h.render(t,i),function(){r.bodyMid.geometry.computeBoundingBox();var t=r.bodyMid.geometry.boundingBox;(y=new THREE.Vector3).subVectors(t.max,t.min),y.multiplyScalar(.5),y.add(t.min),y.applyMatrix4(r.bodyMid.matrixWorld)}(),r.flyPath(),E%5==0&&function(t){t.mesh.material.opacity=1,t.mesh.position.x=y.x,t.mesh.position.y=y.y,t.mesh.position.z=y.z,t.mesh.scale.set(.1,.1,.1);var i=new TimelineMax,o=TweenMax.to(t.mesh.scale,1*Math.random()+.3,{x:1*Math.random()+.7,y:1*Math.random()+.7,z:1*Math.random()+.7,delay:.1,ease:Strong.easeOut}),e=TweenMax.to(t.mesh.scale,.5,{x:.1,y:.1,z:.1,ease:Strong.easeIn,onComplete:T,onCompleteParams:[t]});i.add(o).add(e,.6).play()}(M.length?M.pop():new b),E++;var s=Date.now();moon.rotation.y=2e-4*s,o.update()}()}